<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Flipbook 3D</title>
<style>
  body {
    margin: 0;
    background: #000;
    font-family: sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    position: relative;
  }

  /* Contenedor del libro */
  #book-container {
    position: relative;
  }

  #book {
    width: 900px;
    height: 600px;
    background: #000;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    position: relative;
    z-index: 1;
  }

  /* Botones de navegación */
  #controls {
    position: absolute;
    top: -50px; /* un poco arriba del flipbook */
    left: 50%;
    transform: translateX(-50%);
    z-index: 9999;
    text-align: center;
  }

  #controls button {
    padding: 8px 12px;
    margin: 0 4px;
    border: none;
    background: rgba(140, 98, 57, 0.9);
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }

  #book img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
    transform-origin: top center;
  }

  /* Móvil */
  @media (max-width: 768px) {
  #controls {
    display: flex;          /* coloca los botones en fila */
    justify-content: center; /* centra horizontalmente */
    gap: 8px;               /* espacio entre los botones */
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
  }
  #controls button span.arrow {
    font-size: 1.2em;   /* tamaño igual para ambas flechas */
    vertical-align: middle; /* alinea la flecha con el texto */
  }
  #controls button {
    padding: 6px 10px;
    margin: 0; /* los botones ya tienen espacio por gap */
  }
}

</style>
</head>
<body>

<div id="book-container">
  <div id="book"></div>

  <!-- Botones de navegación -->
  <div id="controls">
    <button onclick="$('#book').turn('previous')"><span class="arrow">←</span> Anterior</button>
    <button onclick="$('#book').turn('next')">Siguiente <span class="arrow">→</span></button>
  </div>
</div>

<script src="jquery.min.js"></script>
<script src="turn.min.js"></script>
<script src="pdf.js"></script>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc = "pdf.worker.js";
const pdfUrl = "carta.pdf";

// Cargar PDF
pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {
  const pagesPromises = [];
  for (let i = 1; i <= pdf.numPages; i++) {
    pagesPromises.push(
      pdf.getPage(i).then(page => {
        const viewport = page.getViewport({ scale: 1.5 });
        const canvas = document.createElement("canvas");
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        return page.render({ canvasContext: canvas.getContext("2d"), viewport }).promise
          .then(() => canvas.toDataURL());
      })
    );
  }

  Promise.all(pagesPromises).then(images => {
    images.forEach(imgData => {
      const pageDiv = document.createElement("div");
      pageDiv.innerHTML = `<img src="${imgData}">`;
      $("#book").append(pageDiv);
    });
    inicializarLibro();
  });
});

function inicializarLibro() {
  const isMobile = window.innerWidth < 768;
  const width = isMobile ? window.innerWidth : 900;
  const height = isMobile ? window.innerHeight : 600;

  $("#book").css({ width: width + "px", height: height + "px" });

  $("#book").turn({
    width,
    height,
    display: isMobile ? "single" : "double",
    autoCenter: true,
    elevation: 80,
    gradients: true,
    acceleration: true
  });
}

window.addEventListener("resize", () => {
  const width = window.innerWidth < 768 ? window.innerWidth : 900;
  const height = window.innerWidth < 768 ? window.innerHeight : 600;
  $("#book").turn("destroy");
  inicializarLibro();
});
</script>

</body>
</html>


